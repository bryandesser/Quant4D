

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Custom Detectors &mdash; Quant4D 2025.03.17 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="https://quant4d.readthedocs.io/en/latest/custom_apertures.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=0423a653"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ROIs" href="rois.html" />
    <link rel="prev" title="DPC/CoM" href="dpc_com.html" /> 
<meta name="google-site-verification" content="88B8Wu8mpwVWjINcWbx75MH9KXi1L5f8DUjiY9CFXQ0" />
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Quant4D
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphical_user_interface.html">Graphical user interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="functionality.html">Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="alignment.html">Alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="annular_round.html">Annular/Round detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtual_apertures.html">Virtual apertures</a></li>
<li class="toctree-l1"><a class="reference internal" href="dpc_com.html">DPC/CoM</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom Detectors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#detector-types">Detector Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#detector-mask-interactions">Detector mask interactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inter-mask">Inter-mask</a></li>
<li class="toctree-l3"><a class="reference internal" href="#intra-mask">Intra-mask</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mask-specific-options">Mask-specific options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mask-maths">Mask maths</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rois.html">ROIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="export.html">Save/Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgement.html">Acknowledgement</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Quant4D</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="functionality.html">Functionality</a></li>
      <li class="breadcrumb-item active">Custom Detectors</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/bryandesser/Quant4D/blob/master/docs/source/custom_apertures.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <span class="target" id="custom-apertures"></span><section id="custom-detectors">
<h1>Custom Detectors<a class="headerlink" href="#custom-detectors" title="Link to this heading">ÔÉÅ</a></h1>
<p>Quant4D offers a number of more flexible detector mask options that can also be
interfered in several different ways, as described in further detail below.</p>
<section id="detector-types">
<h2>Detector Types<a class="headerlink" href="#detector-types" title="Link to this heading">ÔÉÅ</a></h2>
<p>There currently six pre-defined detector mask options, as listed below, with
the added ability to import a pre-calculated diffraction mask (with caveats).
At present, all pre-defined masks are centered on the transmitted beam.</p>
<div class="line-block">
<div class="line"><img alt="circle" class="no-scaled-link" src="_images/circle.png" style="height: 2ex;" /> - Circular aperture (can be mirrored for a pair of apertures).</div>
<div class="line"><img alt="grid" class="no-scaled-link" src="_images/grid.png" style="height: 2ex;" /> - Grid of circular apertures</div>
<div class="line"><img alt="grid_no_tb" class="no-scaled-link" src="_images/grid_no_tb.png" style="height: 2ex;" /> - Grid of circular apertures, excluding the transmitted beam,
as well as every 2nd lattice location. Especially useful when interrogating
superlattice reflections, whilst ignoring Bragg reflections from the matrix.</div>
<div class="line"><img alt="bandpass" class="no-scaled-link" src="_images/bandpass.png" style="height: 2ex;" /> - Bandpass mask.</div>
<div class="line"><img alt="wedge" class="no-scaled-link" src="_images/wedge.png" style="height: 2ex;" /> - Wedge mask extending from the transmitted beam to the edges of the
diffraction pattern. Default is mirrored across the transmitted beam;
however, this can be turned off to only capture scattering on one side of
diffraction space.</div>
<div class="line"><img alt="poly" class="no-scaled-link" src="_images/poly.png" style="height: 2ex;" /> - User-drawn polygon shaped diffraction mask.</div>
<div class="line"><img alt="openMask" class="no-scaled-link" src="_images/openMask.png" style="height: 2ex;" /> - Import a mask image from file.</div>
</div>
<p>In the detector mask table, each mask has attributes listed as described below:</p>
<ul class="simple">
<li><p><strong>ID</strong> : A letter-based ID used in the software for addressing each mask.</p></li>
<li><p><strong>Type</strong> : Mask class (<code class="docutils literal notranslate"><span class="pre">Circle</span></code>, <code class="docutils literal notranslate"><span class="pre">Grid</span></code>, <code class="docutils literal notranslate"><span class="pre">GridNoCenter</span></code>, <code class="docutils literal notranslate"><span class="pre">Bandpass</span></code>,
<code class="docutils literal notranslate"><span class="pre">Wedge</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygon</span></code>, <code class="docutils literal notranslate"><span class="pre">File</span></code>)</p></li>
<li><p><strong>Label</strong> : User-defined label for easy data-specific context.</p></li>
<li><p><strong>‚úÖ</strong> : Enable/disable mask (disabled mask annotations are hidden).</p></li>
<li><p><strong>üëÅ</strong> : Show/hide mask annotation (does not affect enable/disable state).</p></li>
<li><p><strong>Œº</strong> : Mask weighting (default = 1; limits = (-Inf, Inf))</p></li>
</ul>
<p><em>Tip:</em> to use the pre-defined detector masks centered on a different region of
diffraction space, return to <strong>Alignment</strong> mode and shift the position of the
transmitted beam annotation to be centered on the intended region of interest.
Now all custom detector masks will be centered on the newly updated
‚Äútransmitted beam‚Äù center.</p>
</section>
<section id="detector-mask-interactions">
<h2>Detector mask interactions<a class="headerlink" href="#detector-mask-interactions" title="Link to this heading">ÔÉÅ</a></h2>
<p>The user can add as many instances of a detector type as they wish. Because of
this, the interaction between masks must be defined, both at the inter- and
intra-mask level.</p>
<section id="inter-mask">
<h3>Inter-mask<a class="headerlink" href="#inter-mask" title="Link to this heading">ÔÉÅ</a></h3>
<p>This controls the interaction between all enabled detector masks.</p>
<ul class="simple">
<li><p><strong>Color Mix</strong>: Images generated from each detector mask are added together
with their automatically assigned color, which can also be changed by the
user. (Default)</p></li>
<li><p><strong>Union</strong>: Logical <cite>or</cite> operation across all enabled detector masks.
Resultant mask is binary 0 or 1.</p></li>
<li><p><strong>Intersection</strong>: Logical <cite>and</cite> operation across all enabled detector masks.
Resultant mask is binary 0 or 1.</p></li>
<li><p><strong>Additive</strong>: Similar to Color Mix; however, detector masks are added before
image generation, thus individual component images are less obvious in the
final resultant image. Additive overlap between detector masks can result in
significant weighting in diffraction space.</p></li>
<li><p><strong>Current only</strong>: Only generate an image using the currently selected
detector mask, irrespective of other enabled detector masks.</p></li>
</ul>
</section>
<section id="intra-mask">
<h3>Intra-mask<a class="headerlink" href="#intra-mask" title="Link to this heading">ÔÉÅ</a></h3>
<p>Similar to inter-mask operations, some detector masks can result in overlapping
components, requiring well-defined behavior.</p>
<ul class="simple">
<li><p><strong>Union</strong>: Logical <cite>or</cite> operation for all components within the selected
mask. Resultant mask is binary 0 or 1. (Default)</p></li>
<li><p><strong>Intersection</strong>: Logical <cite>and</cite> operation for all components within the
selected mask. Resultant mask is binary 0 or 1.</p></li>
<li><p><strong>Additive</strong>: Any overlapping components within the selected mask will be
added, resulting in increased weighting in those regions of diffraction
space.</p></li>
</ul>
</section>
</section>
<section id="mask-specific-options">
<h2>Mask-specific options<a class="headerlink" href="#mask-specific-options" title="Link to this heading">ÔÉÅ</a></h2>
<p>Several mask transformation options exist depending on the specifics of the
selected mask geometry. Not all options are available at all times.</p>
<div class="line-block">
<div class="line"><img alt="mirrored" class="no-scaled-link" src="_images/mirrored.png" style="height: 2ex;" /> - mirror the mask across the transmitted beam.</div>
<div class="line"><img alt="invertColors" class="no-scaled-link" src="_images/invertColors.png" style="height: 2ex;" /> - invert the mask ([True, False] -&gt; [False, True]).</div>
<div class="line"><img alt="colorPicker" class="no-scaled-link" src="_images/colorPicker.png" style="height: 2ex;" /> - change mask display color.</div>
<div class="line"><img alt="left_rotate" class="no-scaled-link" src="_images/left_rotate.png" style="height: 2ex;" />, <img alt="right_rotate" class="no-scaled-link" src="_images/right_rotate.png" style="height: 2ex;" /> - rotate mask by angle in the dropdown.</div>
<div class="line"><img alt="mirrorHorz" class="no-scaled-link" src="_images/mirrorHorz.png" style="height: 2ex;" /> - mirror the mask across the horizontal plane ([x, y] -&gt; [x, -y]).</div>
<div class="line"><img alt="mirrorVert" class="no-scaled-link" src="_images/mirrorVert.png" style="height: 2ex;" /> - mirror the mask across the vertical plane ([x, y] -&gt; [-x, y]).</div>
<div class="line"><img alt="transpose" class="no-scaled-link" src="_images/transpose.png" style="height: 2ex;" /> - transpose the mask ([x, y] -&gt; [y, x])</div>
</div>
</section>
<section id="mask-maths">
<h2>Mask maths<a class="headerlink" href="#mask-maths" title="Link to this heading">ÔÉÅ</a></h2>
<p>Watch this space.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dpc_com.html" class="btn btn-neutral float-left" title="DPC/CoM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rois.html" class="btn btn-neutral float-right" title="ROIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Bryan D Esser.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>